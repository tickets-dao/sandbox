ClickHouse: 
1. История развития СУБД
    Clickhouse 
2. Инструменты для взаимодействия с СУБД:

    Для взаимодействия с ClickHouse доступны различные инструменты, такие как:
   - Command Line Interface (CLI): clickhouse-client
   - HTTP-интерфейс: можно отправлять запросы через HTTP(S)
   - Программные интерфейсы: библиотеки для различных языков программирования, таких как Python, Go, Java и других
   - Сторонние инструменты и приложения, такие как DBeaver, DataGrip или Tabix
3. Какой database engine используется в вашей СУБД?

    ClickHouse использует собственный движок баз данных под названием "ClickHouse DBMS". Он является колоночным движком, что позволяет эффективно сжимать данные
и обрабатывать аналитические запросы.
4. Как устроен язык запросов в вашей СУБД? Разверните БД с данными и выполните ряд запросов.
   
Язык запросов ClickHouse основан на SQL и расширен дополнительными возможностями, такими как массивы и агрегатные функции.
   Наполнить БД данными можно следующим запросом:

Создать таблицу:
``` sql
CREATE TABLE events (
date Date,
event_type String,
count UInt32
) ENGINE = MergeTree()
PARTITION BY toYYYYMM(date)
ORDER BY (date, event_type);
```
Вставить данные:

```sql
INSERT INTO events (date, event_type, count) VALUES
('2023-05-01', 'login', 100),
('2023-05-01', 'logout', 80),
('2023-05-02', 'login', 150),
('2023-05-02', 'logout', 120);
```
Выполнить запросы:

```sql
SELECT event_type, SUM(count) FROM events GROUP BY event_type;
SELECT date, SUM(count) FROM events WHERE event_type = 'login' GROUP BY date;
```
5. Возможно ли распределение файлов БД по разным носителям?
6. На каком языке/ах программирования написана СУБД?

   ClickHouse написан в основном на языке C++ для обеспечения высокой производительности и оптимизации ресурсов.
7. Какие типы индексов поддерживаются в БД? Приведите пример создания индексов.
   ClickHouse поддерживает несколько типов индексов, таких как первичные, вторичные и битовые индексы. Основные типы индексов в ClickHouse:

   Primary Index: Используется для определения порядка хранения данных на диске и обеспечения эффективного доступа к данным. Создание первичного индекса происходит при создании таблицы. Пример:

```sql
CREATE TABLE example_table (
date Date,
user_id UInt32,
event_type String
) ENGINE = MergeTree()
PARTITION BY toYYYYMM(date)
ORDER BY (date, user_id);
```

Здесь индекс создается на основе столбцов date и user_id.

Secondary Index (скип-индексы): Помогает ускорить запросы, добавляя дополнительные индексы на столбцы таблицы. Пример создания скип-индекса:

```sql

CREATE TABLE example_table (
date Date,
user_id UInt32,
event_type String
) ENGINE = MergeTree()
PARTITION BY toYYYYMM(date)
ORDER BY (date, user_id)
SETTINGS index_granularity = 8192;
```

```sql
ALTER TABLE example_table
ADD INDEX event_type_idx (event_type) TYPE minmax GRANULARITY 4;
```
В этом примере создается скип-индекс на столбце event_type.
9. Как строится процесс выполнения запросов в вашей СУБД?
   
Процесс выполнения запросов в ClickHouse включает несколько основных этапов:
- **Парсинг и оптимизация запроса**: На этом этапе ClickHouse анализирует текст запроса, определяет структуру запроса, и применяет различные оптимизации, чтобы минимизировать время выполнения запроса и ресурсы, необходимые для обработки данных.
- **Чтение данных**: ClickHouse читает данные с диска, используя оптимизации, такие как индексы, для минимизации количества данных, которые необходимо считывать. Благодаря колоночному хранению, ClickHouse может считывать только те столбцы, которые необходимы для выполнения запроса, что ускоряет процесс чтения данных.
- **Обработка данных**: На этапе обработки данных, ClickHouse выполняет операции, указанные в запросе, такие как фильтрация, сортировка, группировка, агрегация и другие. Обработка данных в ClickHouse происходит в векторном режиме, что позволяет быстро обрабатывать большие объемы данных.
- **Распределенная обработка (если применимо)**: Если запрос касается распределенной таблицы, ClickHouse выполняет запрос на каждом шарде и агрегирует результаты с разных шардов. Это позволяет масштабировать обработку данных по горизонтали и обеспечивает высокую производительность даже при очень больших объемах данных.
- **Возврат результата**: После завершения обработки запроса, ClickHouse возвращает результат пользователю или клиентскому приложению. Результат может быть представлен в различных форматах, таких как CSV, JSON, TSV и других.
10. Есть ли для вашей СУБД понятие «план запросов»? Если да, объясните, как работает данный этап.
   
Да, в ClickHouse существует "план запроса". План запроса - это представление того, как механизм базы данных будет выполнять заданный запрос, включая последовательность операций и предполагаемую стоимость каждой операции. В ClickHouse процесс построения плана запроса включает несколько этапов:
- **Парсинг**: ClickHouse сначала анализирует SQL-запрос и строит абстрактное синтаксическое дерево (AST). AST представляет структуру запроса и задействованные операции.
- **Оптимизация**: Затем оптимизатор анализирует AST и применяет различные оптимизации к запросу. Эти оптимизации могут включать переписывание запроса, обрезку столбцов, вытеснение предикатов и многое другое. Целью этапа оптимизации является минимизация времени выполнения и использования ресурсов для запроса.
- **Создание плана запроса**: После оптимизации ClickHouse создает план запроса, который представляет собой древовидную структуру, отражающую последовательность операций, необходимых для выполнения запроса. Каждый узел в плане запроса соответствует определенной операции, такой как фильтрация, сортировка или агрегация.
- **Исполнение плана**: После создания плана запроса ClickHouse выполняет операции, указанные в плане, начиная с листьев дерева и продвигаясь к корню. Во время выполнения данные проходят через план запроса, преобразуясь при каждой операции по мере продвижения по дереву.

Чтобы просмотреть план запроса в ClickHouse, перед запросом можно использовать оператор `EXPLAIN`. Например:

``` sql
EXPLAIN SELECT count(*) FROM example_table WHERE date >= '2021-01-01' AND date <= '2021-12-31';
```
Это вернет план запроса, включая задействованные операции и их предполагаемую стоимость.

11. Поддерживаются ли транзакции в вашей СУБД? Если да, то расскажите о нем. Если нет, то существует ли альтернатива?
    ClickHouse не полностью поддерживает многоэтапные транзакции, как традиционные реляционные базы данных (например, PostgreSQL, MySQL).
Тем не менее, ClickHouse поддерживает некоторый уровень транзакционного поведения:
- Атомарность: ClickHouse обеспечивает атомарность на уровне отдельных операторов манипулирования данными (INSERT, UPDATE, DELETE). Это означает, что если во время выполнения одного оператора произойдет сбой, изменения, сделанные этим оператором, будут откачены, и база данных останется в неизменном состоянии.
- Одновременные INSERT'ы: ClickHouse позволяет выполнять несколько одновременных операторов INSERT без конфликтов и повреждения данных. Данные записываются отдельными частями и объединяются позже в процессе фонового слияния.
- ALTERs и манипуляции с данными: ClickHouse поддерживает одновременное выполнение операторов ALTER и манипулирования данными. Например, вы можете выполнить оператор ALTER для добавления нового столбца, одновременно вставляя данные в таблицу. ClickHouse использует систему версий для обеспечения согласованности и предотвращения конфликтов в таких сценариях.

12. Какие методы восстановления поддерживаются в вашей СУБД. Расскажите о них.
- Репликация: ClickHouse поддерживает репликацию с помощью семейства табличных движков ReplicatedMergeTree. Настроив репликацию, вы можете поддерживать несколько копий данных на разных узлах, обеспечивая отказоустойчивость и избыточность данных. Если один из узлов выходит из строя, другие копии могут продолжать обслуживать запросы и поддерживать доступность данных. Когда отказавший узел вернется в сеть, он автоматически подключится к другим репликам и синхронизирует свои данные.
- Резервное копирование: Регулярное создание резервных копий данных ClickHouse имеет решающее значение для аварийного восстановления. Вы можете создавать моментальные снимки данных через определенные промежутки времени и хранить их на отдельных системах хранения, таких как NFS, HDFS или S3-совместимые сервисы хранения. В случае потери или повреждения данных вы можете восстановить их из этих снимков.
Для создания моментальных снимков данных можно использовать команду FREEZE:
 
```sql
ALTER TABLE table_name FREEZE [PARTITION partition_expr] [WITH NAME 'snapshot_name'];
```

Эта команда создаст моментальный снимок таблицы или определенных разделов и сохранит его в теневом каталоге вашего пути к данным ClickHouse.

- Восстановление из резервной копии: Чтобы восстановить данные из резервной копии, можно создать новую таблицу с той же схемой, что и исходная таблица, а затем присоединить к ней части данных из резервного снимка. Например:

``` sql
-- Создать новую таблицу с той же схемой

CREATE TABLE restored_table_name (...schema...) ENGINE = MergeTree() ...;


-- Присоедините части данных из резервного снимка

ALTER TABLE restored_table_name ATTACH PARTITION partition_expr FROM '/path/to/backup/snapshot/';
```
12. Расскажите про шардинг в вашей конкретной СУБД. Какие типы используются? Принцип работы.
    Шардинг в ClickHouse достигается в основном за счет механизма распределенных таблиц, который позволяет создать логическую таблицу, представляющую несколько базовых таблиц (шардов) на разных узлах.
    
    Механизм распределенных таблиц: При создании распределенной таблицы необходимо указать конфигурацию кластера, которая включает адреса и другие настройки узлов, участвующих в кластере. Также необходимо указать локальный движок таблицы (обычно это движки семейства MergeTree), который будет использоваться для хранения данных на отдельных узлах.


   Например, таблицу distributed_table_name можно создать следующим образом:

```sql
CREATE TABLE distributed_table_name (...schema...)

ENGINE = Distributed(cluster_name, database_name, local_table_name, sharding_key_expr);
```

В этом примере cluster_name относится к конфигурации кластера, определенной в вашем файле конфигурации ClickHouse ,
database_name и local_table_name относятся к именам локальных таблиц на каждом узле, а sharding_key_expr - это выражение, используемое для определения того, как данные должны быть распределены между шардами.


Типы шардингов: ClickHouse поддерживает два основных типа шардинга:
- Шардинг на основе хэша (hashed): Этот тип шардинга использует согласованную функцию хэширования для равномерного распределения данных между шардами на основе ключа шардинга. Шардинг на основе хэша подходит для сценариев, в которых распределение данных неизвестно или сильно изменяется.
- Шардинг на основе диапазона(range): Этот тип шардинга распределяет данные на основе диапазона значений в ключе шардинга. Шардинг на основе диапазона полезен, когда распределение данных более предсказуемо или вы хотите оптимизировать его под определенные шаблоны запросов.


Выбор типа шардинга зависит от конкретного случая использования и моделей распределения данных в вашем приложении.


Процесс шардинга: Когда вы вставляете данные в распределенную таблицу, ClickHouse вычисляет целевой шард для каждой строки на основе выражения ключа шардинга. Затем строка отправляется на целевой шард и сохраняется в локальной таблице на соответствующем узле. Аналогично, когда вы запрашиваете распределенную таблицу, ClickHouse отправляет запрос на все шарды, а затем агрегирует результаты, прежде чем вернуть их клиенту.


Репликация: Шардинг может быть объединен с репликацией для обеспечения горизонтальной масштабируемости и отказоустойчивости. Вы можете создать распределенную таблицу над таблицами ReplicatedMergeTree, что позволит вам поддерживать несколько копий каждого шарда. При такой настройке ClickHouse будет распределять данные между шардами и репликами, обеспечивая балансировку нагрузки и избыточность данных.
13. Возможно ли применить термины Data Mining, Data Warehousing и OLAP в вашей СУБД?
    ClickHouse изначально строился для OLAP применения в Яндекс Метрике, так что именно OLAP  является его главным применением. Но может использоваться и для DWH, так как нацелен на хранение большого объема данных
14. Какие методы защиты поддерживаются вашей СУБД? Шифрование трафика, модели авторизации и т.п.
    ClickHouse предоставляет несколько средств безопасности, помогающих защитить ваши данные и контролировать доступ к системе. Некоторые из основных методов безопасности, поддерживаемых ClickHouse, включают:
- **Аутентификация**: ClickHouse поддерживает аутентификацию пользователей с помощью имени пользователя и пароля. Вы можете создавать пользователей и предоставлять им привилегии на определенные базы данных, таблицы или столбцы. Учетные данные пользователей хранятся в конфигурации сервера ClickHouse, и вы можете определить правила управления доступом, используя SQL-подобный синтаксис. Например:
   ```sql
   CREATE USER user_name IDENTIFIED WITH plaintext_password BY 'password';

   GRANT SELECT, INSERT ON database_name.* TO user_name;
   ```

-  **Управление доступом на основе ролей (RBAC)**: ClickHouse поддерживает управление доступом на основе ролей, что позволяет вам определять роли с определенными привилегиями и назначать их пользователям. Роли упрощают управление доступом, позволяя вам группировать связанные привилегии вместе и применять их к нескольким пользователям. Например:
   ```sql
   CREATE ROLE read_only;

   GRANT SELECT ON database_name.* TO read_only;

   GRANT read_only TO user_name;

   ```
-  **Шифрование сетевого трафика**: ClickHouse поддерживает шифрование сетевого трафика между клиентом и сервером с помощью Transport Layer Security (TLS). Чтобы включить шифрование TLS, необходимо настроить сервер ClickHouse с SSL-сертификатом и закрытым ключом. После настройки клиенты могут подключаться к серверу, используя протокол `https` или зашифрованный порт TCP. ClickHouse также поддерживает шифрование трафика между узлами сервера в распределенной системе с помощью TLS.
-  **Аудит**: ClickHouse предоставляет возможности аудита путем регистрации различных событий и действий, выполняемых пользователями, таких как выполненные запросы, возникшие ошибки и попытки доступа пользователей. Вы можете настроить уровень и формат протоколирования в конфигурации сервера ClickHouse в соответствии с вашими требованиями к аудиту.

Эти методы безопасности обеспечивают основу для защиты ваших данных и контроля доступа к вашему развертыванию ClickHouse. Очень важно настроить и использовать эти функции надлежащим образом, а также следовать передовым методам обеспечения безопасности системы и сети, чтобы обеспечить безопасное и надежное развертывание ClickHouse.
15. Какие сообщества развивают данную СУБД? Кто в проекте имеет права на коммит и создание дистрибутива версий? Расскажите об этих людей и/или компаниях.

Коммиты осуществляются главным образом командой разработчиков ClickHouse. Однако, так как ClickHouse является проектом с открытым исходным кодом, другие разработчики из сообщества также могут вносить свой вклад, отправляя пул-реквесты на GitHub. Все предложения по изменениям рассматриваются и проверяются командой ClickHouse перед их интеграцией в основной код.ства развивают данную СУБД? Кто в проекте имеет права на коммит и создание дистрибутива версий? Расскажите об этих людей и/или компаниях.Коммиты и создание дистрибутивов осуществляются главным образом командой разработчиков ClickHouse из компании Yandex. Однако, так как ClickHouse является проектом с открытым исходным кодом, другие разработчики из сообщества также могут вносить свой вклад, отправляя пул-реквесты на GitHub. Все предложения по изменениям рассматриваются и проверяются командой ClickHouse перед их интеграцией в основной код.
16. Создайте свои собственные данные для демонстрации работы СУБД.

Для демонстрации работы ClickHouse, вы можете создать свои собственные данные. Например, создайте таблицу для хранения информации о продажах:

```sql

CREATE TABLE sales (
date Date,
product_id UInt32,
price Float64,
quantity UInt32
) ENGINE = MergeTree()
ORDER BY (date, product_id);
```

```sql

INSERT INTO sales (date, product_id, price, quantity) VALUES
('2023-05-01', 1, 100.0, 10),
('2023-05-02', 2, 200.0, 5),
('2023-05-03', 1, 100.0, 8),
('2023-05-03', 2, 200.0, 12);
```

```sql
SELECT date, SUM(price * quantity) as revenue
FROM sales
GROUP BY date
ORDER BY date;
```
17. Как продолжить самостоятельное изучение языка запросов с помощью демобазы. Если демобазы нет, то создайте ее.
18. Где найти документацию и пройти обучение
    https://clickhouse.com/
19. Как быть в курсе происходящего
emails + GitHub
